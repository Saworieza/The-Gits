if(typeof FM==="undefined")var FM={};if(typeof FM.Logger==="undefined"){FM.Logger=function(img,baseUrl){this.img=img;this.baseUrl=baseUrl};FM.Logger.prototype.reportError=function(errMsg,except,includeRandom){if(typeof includeRandom==="undefined")includeRandom=true;var msg="[Ads JS] ";try{msg+=errMsg;try{msg+=" - "+except.message}catch(e){}var rnd=includeRandom?"&r="+Math.floor(Math.random()*9E5):"";this.img.src=this.baseUrl+"/errors/ads?msg="+encodeURIComponent(msg)+rnd}catch(e){}}};var rnd=Math.floor(Math.random()*999999999+1);if(typeof fmDataLayer=="undefined")var fmDataLayer=[{fmRandom:rnd}];if(typeof fmDataLayer[0]["fmRandom"]=="undefined")fmDataLayer[0].fmRandom=rnd;if(typeof FM=="undefined")var FM={};if(typeof FM.Containers=="undefined")FM.Containers={};
if(typeof FM.CTBootstrap=="undefined"){FM.CTBootstrap=function(containerDataUrl,host,type,cID){this.host=host;if(typeof FM[type]=="undefined")FMVars[type]=false;if(typeof FM.Containers["ct"+cID]=="undefined"){var resource=document.createElement("script");resource.type="text/javascript";resource.async=true;resource.src=containerDataUrl;var script=document.getElementsByTagName("script")[0];script.parentNode.insertBefore(resource,script);resource.host=host;if(resource.addEventListener)resource.addEventListener("load",
FM.CTFire);else if(resource.readyState){resource.onloadDone=false;resource.onload=function(){resource.onloadDone=true;FM.CTFire(cID)};resource.onreadystatechange=function(){if(("loaded"===resource.readyState||"complete"===resource.readyState)&&!resource.onloadDone){resource.onloadDone=true;FM.CTFire(cID)}}}}else if(type=="multi")FM.CTFire(cID)};FM.CTFire=function(cID){if(typeof this.host=="undefined")this.host=FMVars.host;var logger=new FM.Logger(this.host);fmDataLayer[0]["fmGeo"]=containerData.geo;
fmDataLayer[0]["ljt_reader"]=containerData.ljt_reader;if(typeof FM.Containers["ct"+cID]=="undefined"){var container=new FM.ContainerTag(containerData.tags,logger);FM.Containers["ct"+cID]=container}else container=FM.Containers["ct"+cID];container.fire()}}
if(typeof FM.ContainerTag=="undefined"){FM.ContainerTag=function(tags,logger){this.tags=tags;this.logger=logger;this.firedTags=[]};var proto=FM.ContainerTag.prototype;proto.getImage=function(tag){var img=new Image;try{var src=this.createPath(tag);img.tag=tag;img.onload=function(){};img.onerror=function(e){if(typeof this.logger!="undefined")this.logger.reportError(e.target.tag.error,{message:"Error: loading image"})};img.src=src;if(typeof tag.fire!="undefined"&&tag.fire=="once")this.firedTags.push(tag.id)}catch(e){if(typeof this.logger!=
"undefined")this.logger.reportError(tag.error,e)}};proto.getScript=function(tag){try{var resource=document.createElement("script");resource.type="text/javascript";resource.text=tag.src;document.body.appendChild(resource)}catch(e){if(typeof this.logger!="undefined")this.logger.reportError(tag.error,e)}};proto.fire=function(){for(var i=0;i<this.tags.length;i++)if(this.checkRules(this.tags[i]["rules"])&&this.checkFreq(this.tags[i])&&this.checkFired(this.tags[i])){switch(this.tags[i]["type"]){case "img":this.getImage(this.tags[i]);
break;case "script":this.getScript(this.tags[i]);break}this.tags[i]["fired"]=true}};proto.checkRules=function(rules){if(rules==null)return true;for(var i=0;i<rules.length;i++){var retval=false;var value_1=this.getData(rules[i]["var"]);var value_2=rules[i]["value"];var operand=rules[i]["operand"];if(value_1=="")return false;switch(operand){case "eq":retval=""+value_1==""+value_2;break;case "gt":retval=value_1>value_2;break;case "lt":retval=value_1<value_2;break;case "ct":retval=value_1.indexOf(value_2)<
0?false:true;break;default:return false}if(retval==false)return retval}return true};proto.checkFired=function(tag){if(typeof tag.fire=="undefined")return true;if(tag.fire!="once")return true;if(this.tagHasFired(tag.id))return false;return true};proto.checkFreq=function(tag){switch(tag.frequency){case "sample":if(Math.random()*100<tag.percent)return true;return false;case "timed":var cookieName="fm_tag_"+tag.id+"_called";var cookieValue=this.getData(cookieName);var date=new Date;if(cookieValue!=""&&
parseInt(cookieValue)>date.getTime())return false;date.setSeconds(date.getSeconds()+parseInt(tag.time));document.cookie=cookieName+"="+date.getTime()+"; expires="+date.toUTCString()+"; path=/";return true;case "users":var modulo=Math.floor(1/(tag.percent/100));var cookieValue=this.getData("ljt_reader");if(cookieValue.length==32){var firstInt=parseInt(cookieValue.substr(0,8),16);var secondInt=parseInt(cookieValue.substr(8,8),16);var thirdInt=parseInt(cookieValue.substr(16,8),16);var fourthInt=parseInt(cookieValue.substr(24,
8),16);if((firstInt+secondInt+thirdInt+fourthInt)%modulo==0)return true}return false;default:return true}return true};proto.tagHasFired=function(tagId){var len=this.firedTags.length;for(var i=0;i<len;i++)if(this.firedTags[i]==tagId)return true;return false};proto.createPath=function(tag){var q="";var symb="?";if(tag.src.indexOf("?")>0)symb="&";for(var i=0;i<tag.params.length;i++){q=q+symb+tag.params[i]["key"]+"="+this.getData(tag.params[i]["var"]);symb="&"}return tag.src+q};proto.getData=function(key){if(typeof fmDataLayer==
"object"&&typeof fmDataLayer[0]=="object"&&typeof fmDataLayer[0][key]!="undefined")return fmDataLayer[0][key];var cookieRegEx=new RegExp("(?:(?:^|.*;\\s*)"+key+"\\s*\\=\\s*([^;]*).*$)|^.*$");var cookieVal=document.cookie.replace(cookieRegEx,"$1");if(cookieVal)return cookieVal;return""}}
if(typeof Array.prototype.indexOf==="undefined")Array.prototype.indexOf=function(searchElement,fromIndex){if(!this)throw new TypeError;fromIndex=+fromIndex;if(isNaN(fromIndex))fromIndex=0;var length=this.length;if(length==0||fromIndex>=length)return-1;if(fromIndex<0)fromIndex+=length;while(fromIndex<length)if(this[fromIndex++]===searchElement)return fromIndex;return-1};if(typeof FMVars!="undefined"&&typeof FMVars.host!="undefined"&&typeof FMVars.containerUrl!="undefined"&&FMVars.containerType!="undefined"&&FMVars.containerId!="undefined")FM.CTBootstrap(FMVars.containerUrl,FMVars.host,FMVars.containerType,FMVars.containerId);